/////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////    MAPA      //////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////

let map = L.map('map').setView([-33.3494,-60.2277],13);
L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19,
    attribution: '&copy; <a href="https://osm.org/copyright">OpenStreetMap</a> contributors'
}).addTo(map);
////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////


///////////////////////////////////////////////////////////////////////////////////
///////////////////////////       MI LOCALIZACION        //////////////////////////
///////////////////////////////////////////////////////////////////////////////////

map.locate({setView: true, maxZoom: 16});
function onLocationFound(e) {
  var radius = e.accuracy;

  L.marker(e.latlng).addTo(map)
      .bindPopup("Estas a " + radius + " metros de este punto").openPopup();

  L.circle(e.latlng, radius).addTo(map);
}

map.on('locationfound', onLocationFound);
function onLocationError(e) {
  alert(e.message);
}

map.on('locationerror', onLocationError);
/////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////////////
////////////////////////////////   MARCADOR      //////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////
//////         L.marker([ , ]).addTo(map);                           ////////////// 
//////         L.marker([-33.358718, -60.189326]).addTo(map);       /////////////
////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////

const apiKey = "AAPK142794dad3584bf0afaef7ade27ed59duxNHWM470NcsAOISb_bwpR2TlpL5oXmZrTKDTtOyGzi3VtGM82TvsssTzKKyH4lq"
const basemapEnum = "ArcGIS:Navigation";



///////////////////////////////////////////////////////////////////////////////
///////////////////////                        ////////////////////////////////
///////////////////////    INGRESAR LUGAR      ///////////////////////////////
///////////////////////                        ////////////////////////////////
///////////////////////////////////////////////////////////////////////////////
    var searchControl = L.esri.Geocoding.geosearch().addTo(map);
    var searchControl = L.esri.Geocoding.geosearch({
        position: 'topright',
        placeholder: 'Enter an address or place e.g. 1 York St',
        useMapBounds: false,
        providers: [L.esri.Geocoding.arcgisOnlineProvider({
          apikey: apiKey, 
          nearby: {
            lat: -33.3494,
            lng: -60.2277,
          }
        })]
      }).addTo(map);

 const results = L.layerGroup().addTo(map);

  searchControl.on('results', function (data) {
    results.clearLayers();
    for (var i = data.results.length - 1; i >= 0; i--) {
      results.addLayer(L.marker(data.results[i].latlng));
    }
 }).addTo(map);

 ///////////////////////////////////////////////
